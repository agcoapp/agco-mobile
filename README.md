# SGM Mobile - Syst√®me de Gestion des Membres

[![React Native](https://img.shields.io/badge/React%20Native-0.81.4-blue.svg)](https://reactnative.dev/)
[![Expo](https://img.shields.io/badge/Expo-54.0.8-000020.svg)](https://expo.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9.2-blue.svg)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/License-Private-red.svg)]()

Application mobile cross-platform pour la gestion des membres de l'Association des Gabonais du Congo (AGCO). Cette application permet la gestion compl√®te des adh√©sions, la g√©n√©ration de cartes de membres, et l'administration des membres de l'association.

---

## üìã Table des mati√®res

- [Aper√ßu du projet](#-aper√ßu-du-projet)
- [Fonctionnalit√©s principales](#-fonctionnalit√©s-principales)
- [Architecture](#-architecture)
- [Pr√©requis](#-pr√©requis)
- [Installation](#-installation)
- [Configuration](#-configuration)
- [Structure du projet](#-structure-du-projet)
- [Guide de d√©veloppement](#-guide-de-d√©veloppement)
- [Gestion des utilisateurs](#-gestion-des-utilisateurs)
- [API Backend](#-api-backend)
- [Authentification](#-authentification)
- [Navigation](#-navigation)
- [Gestion d'√©tat](#-gestion-d√©tat)
- [Composants cl√©s](#-composants-cl√©s)
- [Scripts disponibles](#-scripts-disponibles)
- [Tests](#-tests)
- [D√©ploiement](#-d√©ploiement)
---

## üéØ Aper√ßu du projet

**SGM Mobile** est une application mobile d√©velopp√©e avec **React Native** et **Expo** pour g√©rer les membres d'une association. Elle offre une interface intuitive et des fonctionnalit√©s compl√®tes pour:

- **Membres**: Consultation de leur carte d'adh√©sion, annuaire des membres, changement de mot de passe
- **Secr√©taire G√©n√©rale**: Gestion compl√®te des adh√©sions, g√©n√©ration de cartes, gestion des codes d'acc√®s
- **Pr√©sident**: Consultation des statistiques et validation des d√©cisions importantes

### Technologies principales

- **React Native 0.81.4** - Framework mobile cross-platform
- **Expo SDK 54** - Plateforme de d√©veloppement React Native
- **TypeScript 5.9.2** - Typage statique
- **Expo Router 6.0.6** - Navigation file-based
- **AsyncStorage** - Stockage local persistant
- **Axios** - Client HTTP pour les appels API
- **React Context API** - Gestion d'√©tat global

---

## ‚ú® Fonctionnalit√©s principales

### Pour tous les utilisateurs

- ‚úÖ **Authentification s√©curis√©e** avec tokens JWT
- ‚úÖ **Gestion du profil** et changement de mot de passe
- ‚úÖ **Annuaire des membres** avec recherche
- ‚úÖ **Interface responsive** pour tous les types d'√©crans

### Pour les membres

- üì± **Consultation de la carte de membre** (recto/verso)
- üíæ **T√©l√©chargement de la carte** en PNG ou PDF
- üìã **Consultation de la fiche d'adh√©sion**
- üë• **Acc√®s √† l'annuaire** des membres
- üîí **S√©curit√© du compte** avec changement de mot de passe

### Pour la Secr√©taire G√©n√©rale

- üìä **Tableau de bord** avec statistiques en temps r√©el
- ‚úÖ **Gestion des adh√©sions**: validation, rejet, modification
- üÉè **G√©n√©ration automatique** des cartes de membre
- üë§ **Cr√©ation de nouveaux membres** avec identifiants
- üîë **Gestion des codes d'acc√®s** temporaires
- üìÑ **Gestion des documents** officiels et textes
- üìà **Statistiques d√©taill√©es** par statut
- üñäÔ∏è **Signature num√©rique** du pr√©sident

### Pour le Pr√©sident

- üìä **Consultation des statistiques** globales
- üëÅÔ∏è **Visualisation des adh√©sions** en attente
- üìã **Consultation de l'annuaire** complet

---

## üèóÔ∏è Architecture

### Architecture g√©n√©rale

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Application Mobile                ‚îÇ
‚îÇ         (React Native + Expo)               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ   Screens    ‚îÇ      ‚îÇ  Components  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   (Pages)    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   (UI/UX)    ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ         ‚îÇ                      ‚îÇ            ‚îÇ
‚îÇ         ‚îÇ                      ‚îÇ            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ         Hooks & Contexts           ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   (useAuth, LastTabContext)        ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îò    ‚îÇ
‚îÇ         ‚îÇ                            ‚îÇ     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ ApiService  ‚îÇ            ‚îÇAsyncStorage‚îÇ ‚îÇ
‚îÇ  ‚îÇ  (Axios)    ‚îÇ            ‚îÇ  (Local)   ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ         ‚îÇ                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ
          ‚îÇ HTTPS/REST API
          ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Backend API (Railway)               ‚îÇ
‚îÇ   https://sgm-backend-production.up        ‚îÇ
‚îÇ          .railway.app                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Architecture des composants

- **Screens (Pages)**: √âcrans principaux de l'application (tabs)
- **Components**: Composants r√©utilisables (UI, Forms, Modals)
- **Hooks**: Logique m√©tier r√©utilisable (useAuth, useNavigationHistory)
- **Contexts**: √âtat global partag√© (AuthProvider, LastTabContext)
- **Services**: Communication avec le backend (apiService)
- **Utils**: Fonctions utilitaires et constantes

### Flux d'authentification

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Login   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ V√©rification     ‚îÇ
‚îÇ Identifiants     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    Non    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Changement mot   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Dashboard ou    ‚îÇ
‚îÇ de passe requis? ‚îÇ           ‚îÇ  Registration    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ Oui
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ForcePassword    ‚îÇ
‚îÇ ChangeModal      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    EN_ATTENTE   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Statut Adh√©sion? ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ AdhesionPending  ‚îÇ
‚îÇ                  ‚îÇ                 ‚îÇ     Modal        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ
     ‚îÇ APPROUVE
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Dashboard      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ REJETE
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Registration    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì¶ Pr√©requis

Avant de commencer, assurez-vous d'avoir install√©:

### Logiciels requis

- **Node.js** >= 18.x ([T√©l√©charger](https://nodejs.org/))
- **npm** >= 9.x ou **yarn** >= 1.22.x
- **Git** ([T√©l√©charger](https://git-scm.com/))
- **Expo CLI** (sera install√© automatiquement)

### Pour le d√©veloppement iOS

- **macOS** (obligatoire pour iOS)
- **Xcode** >= 14.x ([Mac App Store](https://apps.apple.com/app/xcode/id497799835))
- **CocoaPods** >= 1.12.x

### Pour le d√©veloppement Android

- **Android Studio** ([T√©l√©charger](https://developer.android.com/studio))
- **Java Development Kit (JDK)** >= 17
- **Android SDK** >= 33
- **√âmulateur Android** ou appareil physique

### Outils recommand√©s

- **VS Code** avec les extensions:
  - React Native Tools
  - ES7+ React/Redux/React-Native snippets
  - TypeScript Vue Plugin (Volar)
  - Prettier - Code formatter
  - ESLint

---

## üöÄ Installation

### 1. Cloner le repository

```bash
git clone https://github.com/agcoapp/agco-mobile.git
cd agco-mobile
```

### 2. Installer les d√©pendances

```bash
npm install
# ou
yarn install
```

### 3. Configuration des variables d'environnement

Cr√©ez un fichier `.env` √† la racine du projet (si n√©cessaire):

```env
# API Backend URL (actuellement hardcod√© dans apiService.ts)
API_BASE_URL=https://sgm-backend-production.up.railway.app

# Cloudinary (pour l'upload d'images)
CLOUDINARY_CLOUD_NAME=votre_cloud_name
CLOUDINARY_API_KEY=votre_api_key
```

> ‚ö†Ô∏è **Note**: L'URL de l'API est actuellement cod√©e en dur dans `services/apiService.ts` √† la ligne 6. Pour la production, il est recommand√© d'utiliser des variables d'environnement.

### 4. D√©marrer l'application

```bash
# D√©marrage avec Expo
npm start
# ou
npx expo start

# D√©marrage sur Android
npm run android

# D√©marrage sur iOS (macOS uniquement)
npm run ios

# D√©marrage sur Web
npm run web
```

### 5. Scanner le QR Code

- **Android**: Utilisez l'application **Expo Go** depuis le Play Store
- **iOS**: Utilisez l'application **Expo Go** depuis l'App Store ou scannez avec l'appareil photo

---

## ‚öôÔ∏è Configuration

### Configuration de l'API

L'URL de l'API backend est configur√©e dans `services/apiService.ts`:

```typescript
const API_BASE_URL = "https://sgm-backend-production.up.railway.app";
```

Pour modifier l'URL (d√©veloppement local, staging, production):

```typescript
// D√©veloppement local
const API_BASE_URL = "http://localhost:3000";

// Staging
const API_BASE_URL = "https://sgm-backend-staging.up.railway.app";

// Production
const API_BASE_URL = "https://sgm-backend-production.up.railway.app";
```

### Configuration Expo

Le fichier `app.json` contient la configuration de l'application:

```json
{
  "expo": {
    "name": "sgm-mobile",
    "slug": "sgm-mobile",
    "version": "1.0.0",
    "scheme": "sgmmobile",
    "orientation": "portrait",
    "userInterfaceStyle": "automatic"
  }
}
```

### Permissions

#### iOS (`app.json`)
```json
"ios": {
  "infoPlist": {
    "NSCameraUsageDescription": "Cette application n√©cessite l'acc√®s √† la cam√©ra pour prendre des photos d'identit√© et des signatures.",
    "NSPhotoLibraryUsageDescription": "Cette application n√©cessite l'acc√®s √† la galerie pour s√©lectionner des photos d'identit√© et des signatures."
  }
}
```

#### Android (`app.json`)
```json
"android": {
  "permissions": [
    "android.permission.CAMERA",
    "android.permission.READ_EXTERNAL_STORAGE",
    "android.permission.WRITE_EXTERNAL_STORAGE"
  ]
}
```

---

## üìÅ Structure du projet

```
sgm-mobile/
‚îú‚îÄ‚îÄ app/                          # √âcrans et navigation (Expo Router)
‚îÇ   ‚îú‚îÄ‚îÄ (tabs)/                   # √âcrans avec navigation par onglets
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx           # Layout des tabs avec drawer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx             # Dashboard/Accueil
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adhesions.tsx         # Gestion des adh√©sions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ membres.tsx           # Liste des membres
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cartes.tsx            # Cartes de membres
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ codes.tsx             # Codes d'acc√®s (Secr√©taire)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documents.tsx         # Documents officiels
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.tsx          # Param√®tres
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ change-password.tsx   # Changement de mot de passe
‚îÇ   ‚îú‚îÄ‚îÄ adhesion/                 # D√©tails d'adh√©sion
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx              # Fiche d'adh√©sion par ID
‚îÇ   ‚îú‚îÄ‚îÄ carte/                    # D√©tails de carte
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx              # Carte de membre par ID
‚îÇ   ‚îú‚îÄ‚îÄ membre/                   # Espace membre
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mon-adhesion.tsx      # Ma fiche d'adh√©sion
‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx               # Layout racine avec AuthProvider
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx                 # Point d'entr√©e (v√©rif auth)
‚îÇ   ‚îú‚îÄ‚îÄ login.tsx                 # √âcran de connexion
‚îÇ   ‚îú‚îÄ‚îÄ register.tsx              # √âcran d'inscription
‚îÇ   ‚îî‚îÄ‚îÄ +not-found.tsx            # Page 404
‚îÇ
‚îú‚îÄ‚îÄ components/                   # Composants r√©utilisables
‚îÇ   ‚îú‚îÄ‚îÄ forms/                    # Formulaires
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LoginForm.tsx         # Formulaire de connexion
‚îÇ   ‚îú‚îÄ‚îÄ ui/                       # Composants UI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdhesionPendingModal.tsx      # Modal adh√©sion en attente
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdhesionStatusModal.tsx       # Modal statut adh√©sion
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CustomDrawerContent.tsx       # Contenu du drawer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ForcePasswordChangeModal.tsx  # Modal changement MDP
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IconSymbol.tsx                # Ic√¥nes syst√®me
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ImageViewer.tsx               # Visionneuse d'images
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoadingScreen.tsx             # √âcran de chargement
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TabBarBackground.tsx          # Fond de la barre d'onglets
‚îÇ   ‚îú‚îÄ‚îÄ AdhesionFormGenerator.tsx # G√©n√©rateur de formulaire
‚îÇ   ‚îú‚îÄ‚îÄ CarteRectoGenerator.tsx   # G√©n√©rateur carte recto
‚îÇ   ‚îú‚îÄ‚îÄ CarteVersoGenerator.tsx   # G√©n√©rateur carte verso
‚îÇ   ‚îî‚îÄ‚îÄ ...                       # Autres composants
‚îÇ
‚îú‚îÄ‚îÄ hooks/                        # Hooks personnalis√©s
‚îÇ   ‚îú‚îÄ‚îÄ useAuth.tsx               # Hook d'authentification (Context)
‚îÇ   ‚îú‚îÄ‚îÄ useNavigationHistory.tsx  # Historique de navigation
‚îÇ   ‚îú‚îÄ‚îÄ useRouterWithHistory.tsx  # Router avec historique
‚îÇ   ‚îú‚îÄ‚îÄ useColorScheme.ts         # D√©tection du th√®me
‚îÇ   ‚îî‚îÄ‚îÄ useThemeColor.ts          # Couleurs du th√®me
‚îÇ
‚îú‚îÄ‚îÄ contexts/                     # Contexts React
‚îÇ   ‚îî‚îÄ‚îÄ LastTabContext.tsx        # M√©morisation du dernier onglet
‚îÇ
‚îú‚îÄ‚îÄ services/                     # Services backend
‚îÇ   ‚îî‚îÄ‚îÄ apiService.ts             # Service API (1300+ lignes)
‚îÇ
‚îú‚îÄ‚îÄ utils/                        # Utilitaires
‚îÇ   ‚îú‚îÄ‚îÄ fonctions.ts              # Fonctions utilitaires
‚îÇ   ‚îî‚îÄ‚îÄ apiDoc.json               # Documentation API
‚îÇ
‚îú‚îÄ‚îÄ constants/                    # Constantes
‚îÇ   ‚îî‚îÄ‚îÄ Colors.ts                 # Palettes de couleurs
‚îÇ
‚îú‚îÄ‚îÄ assets/                       # Ressources statiques
‚îÇ   ‚îú‚îÄ‚îÄ images/                   # Images
‚îÇ   ‚îî‚îÄ‚îÄ fonts/                    # Polices personnalis√©es
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # Scripts utilitaires
‚îÇ   ‚îî‚îÄ‚îÄ reset-project.js          # Script de r√©initialisation
‚îÇ
‚îú‚îÄ‚îÄ app.json                      # Configuration Expo
‚îú‚îÄ‚îÄ package.json                  # D√©pendances npm
‚îú‚îÄ‚îÄ tsconfig.json                 # Configuration TypeScript
‚îú‚îÄ‚îÄ eslint.config.js              # Configuration ESLint
‚îî‚îÄ‚îÄ README.md                     # Documentation (ce fichier)
```

### Description des dossiers principaux

#### `app/`
Contient tous les √©crans de l'application utilisant le syst√®me de **file-based routing** d'Expo Router. Chaque fichier correspond √† une route.

#### `components/`
Composants React r√©utilisables, organis√©s par type (forms, ui, etc.). Suivent le principe de **composition** et sont **ind√©pendants**.

#### `hooks/`
Hooks personnalis√©s pour extraire et r√©utiliser la logique m√©tier. Le plus important est `useAuth.tsx` qui g√®re toute l'authentification.

#### `services/`
Contient `apiService.ts`, un service complet pour communiquer avec le backend. Plus de 1300 lignes avec:
- Gestion automatique des tokens JWT
- Retry automatique en cas d'erreur 429
- Throttling des requ√™tes
- Gestion des erreurs HTTP
- Interfaces TypeScript pour toutes les r√©ponses API

#### `contexts/`
Contexts React pour l'√©tat global partag√© entre composants sans prop drilling.

---

## üë®‚Äçüíª Guide de d√©veloppement

### Conventions de code

#### Nommage

- **Fichiers de composants**: PascalCase (`MyComponent.tsx`)
- **Fichiers utilitaires**: camelCase (`myHelper.ts`)
- **Fichiers de pages**: camelCase ou kebab-case (`my-page.tsx`)
- **Dossiers**: kebab-case (`my-folder/`)

#### Structure d'un composant React

```typescript
import React, { useState, useEffect } from 'react';
import { View, Text, StyleSheet } from 'react-native';

interface MyComponentProps {
  title: string;
  onPress?: () => void;
}

export default function MyComponent({ title, onPress }: MyComponentProps) {
  const [state, setState] = useState<string>('');

  useEffect(() => {
    // Effet de montage
    return () => {
      // Nettoyage
    };
  }, []);

  return (
    <View style={styles.container}>
      <Text style={styles.title}>{title}</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
  },
  title: {
    fontSize: 18,
    fontWeight: 'bold',
  },
});
```

### Gestion des erreurs

```typescript
try {
  const response = await apiService.getMembers();
  // Traiter la r√©ponse
} catch (error) {
  if (error instanceof Error) {
    console.error('Erreur:', error.message);
    Alert.alert('Erreur', error.message);
  } else {
    console.error('Erreur inconnue:', error);
    Alert.alert('Erreur', 'Une erreur inattendue s\'est produite');
  }
}
```

### Ajout d'une nouvelle page

1. Cr√©er le fichier dans `app/` (ex: `app/ma-page.tsx`)
2. Cr√©er le composant de page
3. Le routage est automatique gr√¢ce √† Expo Router

```typescript
// app/ma-page.tsx
import { View, Text } from 'react-native';

export default function MaPage() {
  return (
    <View>
      <Text>Ma nouvelle page</Text>
    </View>
  );
}
```

4. Naviguer vers cette page:

```typescript
import { router } from 'expo-router';

router.push('/ma-page');
```

### Ajout d'un nouvel endpoint API

1. Ajouter l'interface TypeScript dans `services/apiService.ts`:

```typescript
export interface MonNouvelEndpointResponse {
  message: string;
  data: any;
}
```

2. Ajouter la m√©thode dans la classe `ApiService`:

```typescript
async monNouvelEndpoint(params: any): Promise<MonNouvelEndpointResponse> {
  const response = await this.axiosInstance.get(`/api/mon-endpoint`, { params });
  return response.data;
}
```

3. Utiliser dans un composant:

```typescript
const data = await apiService.monNouvelEndpoint({ id: 123 });
```

---

## üë• Gestion des utilisateurs

### R√¥les disponibles

L'application supporte trois r√¥les d'utilisateur:

#### 1. **MEMBRE** (Membre standard)

- Consultation de sa carte de membre
- T√©l√©chargement de sa carte (PNG/PDF)
- Consultation de sa fiche d'adh√©sion
- Acc√®s √† l'annuaire des membres
- Changement de mot de passe

#### 2. **SECRETAIRE_GENERALE** (Secr√©taire G√©n√©rale)

- Toutes les permissions du membre
- Gestion compl√®te des adh√©sions:
  - Validation des demandes
  - Rejet avec motif
  - Modification des informations
- G√©n√©ration des cartes de membre
- Cr√©ation de nouveaux membres
- Gestion des codes d'acc√®s temporaires
- T√©l√©chargement en masse des cartes
- Statistiques d√©taill√©es
- Gestion de la signature du pr√©sident
- Gestion des documents officiels

#### 3. **PRESIDENT** (Pr√©sident)

- Consultation du tableau de bord
- Visualisation des statistiques
- Consultation de l'annuaire
- Consultation des adh√©sions

### Statuts d'adh√©sion

- **EN_ATTENTE**: Adh√©sion soumise, en attente de validation
- **APPROUVE**: Adh√©sion valid√©e, acc√®s complet
- **REJETE**: Adh√©sion rejet√©e, doit soumettre √† nouveau

### Flux d'inscription d'un nouveau membre

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Cr√©ation par Secr√©taire ‚îÇ
‚îÇ  (nom, pr√©nom, tel)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Identifiants g√©n√©r√©s   ‚îÇ
‚îÇ  (username + password)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Membre re√ßoit codes     ‚îÇ
‚îÇ (hors de l'app)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Premi√®re connexion     ‚îÇ
‚îÇ  (doit_changer_mdp)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Changement MDP forc√©    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Remplissage formulaire  ‚îÇ
‚îÇ   d'adh√©sion complet    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Statut: EN_ATTENTE      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Validation Secr√©taire   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Statut: APPROUVE        ‚îÇ
‚îÇ Carte g√©n√©r√©e           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîå API Backend

### URL de base

```
https://sgm-backend-production.up.railway.app
```

### Authentification

Toutes les requ√™tes n√©cessitent un token JWT dans le header `Authorization`:

```
Authorization: Bearer <token>
```

### Principaux endpoints

#### Authentification
- `POST /api/auth/connexion` - Connexion
- `POST /api/auth/deconnexion` - D√©connexion
- `GET /api/auth/profil` - Profil utilisateur
- `GET /api/auth/statut` - Statut complet de l'utilisateur
- `POST /api/auth/change-password` - Changement de mot de passe
- `POST /api/auth/change-temporary-password` - Changement MDP temporaire

#### Membres
- `GET /api/membre/carte-membre` - Carte du membre connect√©
- `GET /api/membre/formulaire-adhesion` - Formulaire d'adh√©sion
- `GET /api/membre/annuaire` - Annuaire des membres
- `GET /api/membre/president-signature` - Signature du pr√©sident

#### Secr√©taire
- `GET /api/secretaire/tableau-bord` - Tableau de bord avec stats
- `POST /api/secretaire/creer-nouveau-membre` - Cr√©er un membre
- `GET /api/secretaire/membres` - Liste des membres
- `GET /api/secretaire/formulaires` - Formulaires d'adh√©sion
- `POST /api/secretaire/approuver-formulaire` - Approuver
- `POST /api/secretaire/rejeter-formulaire` - Rejeter
- `GET /api/secretaire/cartes-membres` - Cartes g√©n√©r√©es
- `POST /api/secretaire/creer-identifiants` - Cr√©er identifiants
- `GET /api/secretaire/nouveaux-utilisateurs-credentials` - Codes d'acc√®s

#### Documents
- `GET /api/categories-texte-officiel` - Cat√©gories de documents
- `POST /api/categories-texte-officiel` - Cr√©er cat√©gorie
- `GET /api/textes-officiels` - Liste des documents
- `POST /api/textes-officiels` - Ajouter document

#### Cloudinary
- `GET /api/signature` - Signature pour upload Cloudinary

### Gestion des erreurs API

Le service API g√®re automatiquement:

- **401**: Identifiants incorrects ‚Üí Message personnalis√©
- **403**: Acc√®s refus√© ‚Üí Message personnalis√©
- **404**: Service non trouv√© ‚Üí Message personnalis√©
- **429**: Rate limit ‚Üí Retry automatique avec backoff exponentiel (3 tentatives)
- **500**: Erreur serveur ‚Üí Message personnalis√©
- **Network error**: Probl√®me de connexion ‚Üí Message personnalis√©

```typescript
// Exemple d'appel avec gestion d'erreur
try {
  const members = await apiService.getMembers();
  // Succ√®s
} catch (error) {
  // L'erreur a d√©j√† √©t√© transform√©e en message lisible
  if (error instanceof Error) {
    Alert.alert('Erreur', error.message);
  }
}
```

### Throttling des requ√™tes

Certaines requ√™tes sont throttl√©es pour √©viter les abus:

```typescript
// Exemple: getMembers a un throttle de 2 secondes
const members = await apiService.getMembers();
// Si appel√© √† nouveau dans les 2 secondes, attend automatiquement
```

---

## üîê Authentification

### Syst√®me d'authentification

L'application utilise un syst√®me complet d'authentification avec:

- **JWT tokens** stock√©s dans AsyncStorage
- **Context API** pour l'√©tat global
- **V√©rification automatique** au d√©marrage
- **Redirections intelligentes** selon le r√¥le et le statut

### Hook useAuth

Le hook `useAuth` expose les m√©thodes suivantes:

```typescript
const {
  user,              // Utilisateur connect√© (ou null)
  userStatus,        // Statut complet de l'utilisateur
  isLoading,         // Chargement en cours
  login,             // Fonction de connexion
  logout,            // Fonction de d√©connexion
  isAuthenticated,   // Boolean: connect√© ou non
  checkAuth,         // V√©rifier l'authentification
  updateUserProfile, // Mettre √† jour le profil
} = useAuth();
```

### Exemple d'utilisation

```typescript
import { useAuth } from '../hooks/useAuth';

function MonComposant() {
  const { user, login, logout, isAuthenticated } = useAuth();

  const handleLogin = async () => {
    try {
      const result = await login({
        nom_utilisateur: 'username',
        mot_passe: 'password',
      });

      if (result.shouldRedirect) {
        router.replace(result.redirectPath);
      }

      if (result.showPasswordChangeModal) {
        // Afficher modal de changement de mot de passe
      }

      if (result.showPendingModal) {
        // Afficher modal d'adh√©sion en attente
      }
    } catch (error) {
      Alert.alert('Erreur', error.message);
    }
  };

  if (!isAuthenticated) {
    return <LoginScreen />;
  }

  return (
    <View>
      <Text>Bonjour {user?.prenoms}</Text>
      <Button onPress={logout} title="D√©connexion" />
    </View>
  );
}
```

### Protection des routes

Les routes sont automatiquement prot√©g√©es gr√¢ce au `_layout.tsx` racine:

```typescript
// app/_layout.tsx
export default function RootLayout() {
  return (
    <AuthProvider>
      {/* L'app est wrapp√©e dans AuthProvider */}
      <Stack>
        {/* Routes */}
      </Stack>
    </AuthProvider>
  );
}
```

V√©rification au d√©marrage:

```typescript
// app/index.tsx
export default function Index() {
  const { isAuthenticated, isLoading } = useAuth();

  useEffect(() => {
    if (!isLoading) {
      if (isAuthenticated) {
        router.replace('/(tabs)');
      } else {
        router.replace('/login');
      }
    }
  }, [isAuthenticated, isLoading]);

  return <LoadingScreen />;
}
```

### Stockage des tokens

Les tokens sont stock√©s dans AsyncStorage:

```typescript
// Cl√©s utilis√©es
- 'sgm_token'  // Token JWT
- 'sgm_user'   // Donn√©es utilisateur compl√®tes (UserStatusResponse)
```

---

## üß≠ Navigation

### Syst√®me de navigation

L'application utilise **Expo Router** qui offre:

- **File-based routing**: Chaque fichier dans `app/` est une route
- **Type-safe routing**: Routes typ√©es automatiquement
- **Deep linking**: Support natif des liens profonds
- **Layout nesting**: Layouts imbriqu√©s pour partager UI

### Structure de navigation

```
app/
‚îú‚îÄ‚îÄ _layout.tsx              # Layout racine (AuthProvider)
‚îú‚îÄ‚îÄ index.tsx                # Point d'entr√©e (/)
‚îú‚îÄ‚îÄ login.tsx                # /login
‚îú‚îÄ‚îÄ register.tsx             # /register
‚îú‚îÄ‚îÄ (tabs)/                  # Groupe de routes avec tabs
‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx          # Layout avec drawer + tabs
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx            # /(tabs)/ - Dashboard
‚îÇ   ‚îú‚îÄ‚îÄ adhesions.tsx        # /(tabs)/adhesions
‚îÇ   ‚îú‚îÄ‚îÄ membres.tsx          # /(tabs)/membres
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ adhesion/
‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx             # /adhesion/123
‚îî‚îÄ‚îÄ carte/
    ‚îî‚îÄ‚îÄ [id].tsx             # /carte/456
```

### Navigation programmatique

```typescript
import { router } from 'expo-router';

// Navigation simple
router.push('/login');

// Navigation avec param√®tres
router.push(`/adhesion/${userId}`);

// Remplacer l'√©cran (pas de retour)
router.replace('/(tabs)');

// Retour arri√®re
router.back();

// Navigation avec query params
router.push('/adhesions?tab=pending');
```

### R√©cup√©ration des param√®tres

```typescript
import { useLocalSearchParams } from 'expo-router';

export default function AdhesionDetails() {
  const { id } = useLocalSearchParams<{ id: string }>();
  
  return <Text>Adh√©sion ID: {id}</Text>;
}
```

### Navigation entre tabs

La navigation entre tabs est g√©r√©e par le `_layout.tsx` dans `(tabs)/`:

```typescript
// app/(tabs)/_layout.tsx
<Tabs>
  <Tabs.Screen
    name="index"
    options={{
      title: 'Accueil',
      tabBarIcon: ({ color }) => <IconSymbol name="house" color={color} />,
    }}
  />
  {/* Autres tabs */}
</Tabs>
```

### Drawer Navigation

Le drawer est √©galement configur√© dans le `_layout.tsx` des tabs:

```typescript
<Drawer
  drawerContent={(props) => <CustomDrawerContent {...props} />}
  screenOptions={{
    drawerPosition: 'left',
    headerShown: true,
  }}
>
  {/* Tabs */}
</Drawer>
```

### Historique de navigation

L'app utilise un hook personnalis√© pour g√©rer l'historique:

```typescript
import { useRouterWithHistory } from '../hooks/useRouterWithHistory';

const router = useRouterWithHistory();

// Utilisation normale
router.push('/ma-page');

// Retour avec historique
router.back(); // Utilise l'historique personnalis√© si disponible
```

### M√©morisation du dernier onglet

```typescript
import { useLastTab } from '../contexts/LastTabContext';

const { lastTab, setLastTab } = useLastTab();

// Sauvegarder l'onglet actuel
setLastTab('membres');

// Revenir au dernier onglet
router.push(`/(tabs)/${lastTab}`);
```

---

## üîÑ Gestion d'√©tat

### Context API

L'application utilise React Context pour l'√©tat global:

#### AuthContext (useAuth)

G√®re l'authentification globale:

```typescript
interface AuthContextType {
  user: User | null;
  userStatus: UserStatusResponse | null;
  isLoading: boolean;
  login: (credentials: LoginRequest) => Promise<LoginResult>;
  logout: () => Promise<void>;
  isAuthenticated: boolean;
  checkAuth: () => Promise<void>;
  updateUserProfile: () => Promise<void>;
}
```

**Utilisation:**

```typescript
const { user, login, logout, isAuthenticated } = useAuth();
```

#### LastTabContext

M√©morise le dernier onglet visit√©:

```typescript
const { lastTab, setLastTab } = useLastTab();
```

### √âtat local (useState)

Pour l'√©tat local d'un composant:

```typescript
const [isLoading, setIsLoading] = useState(false);
const [data, setData] = useState<MyType[]>([]);
const [error, setError] = useState<string | null>(null);
```

### Effet de bord (useEffect)

```typescript
useEffect(() => {
  // Code ex√©cut√© au montage et aux mises √† jour
  fetchData();

  // Cleanup au d√©montage
  return () => {
    cleanup();
  };
}, [dependency]); // D√©pendances
```

### AsyncStorage

Pour la persistance des donn√©es:

```typescript
import AsyncStorage from '@react-native-async-storage/async-storage';

// Sauvegarder
await AsyncStorage.setItem('key', JSON.stringify(data));

// R√©cup√©rer
const data = await AsyncStorage.getItem('key');
const parsed = JSON.parse(data);

// Supprimer
await AsyncStorage.removeItem('key');

// Supprimer plusieurs
await AsyncStorage.multiRemove(['key1', 'key2']);

// Vider tout
await AsyncStorage.clear();
```

---

## üé® Composants cl√©s

### LoadingScreen

√âcran de chargement r√©utilisable:

```typescript
import LoadingScreen from '../components/ui/LoadingScreen';

<LoadingScreen message="Chargement en cours..." />
```

### ForcePasswordChangeModal

Modal pour forcer le changement de mot de passe:

```typescript
<ForcePasswordChangeModal
  visible={showModal}
  onClose={() => setShowModal(false)}
  userEmail={user?.email}
/>
```

### AdhesionStatusModal

Modal pour afficher le statut d'adh√©sion:

```typescript
<AdhesionStatusModal
  visible={showModal}
  onClose={() => setShowModal(false)}
  status="EN_ATTENTE"
  message="Votre adh√©sion est en cours de traitement"
/>
```

### AdhesionPendingModal

Modal pour les adh√©sions en attente:

```typescript
<AdhesionPendingModal
  visible={showModal}
  onClose={() => setShowModal(false)}
/>
```

### ImageViewer

Visionneuse d'images avec zoom:

```typescript
import ImageViewer from '../components/ui/ImageViewer';

<ImageViewer
  imageUri="https://example.com/image.jpg"
  onClose={() => setModalVisible(false)}
/>
```

### CustomDrawerContent

Contenu personnalis√© du drawer avec menu de navigation:

```typescript
// Utilis√© automatiquement dans app/(tabs)/_layout.tsx
<Drawer
  drawerContent={(props) => <CustomDrawerContent {...props} />}
>
  {/* Routes */}
</Drawer>
```

### CarteRectoGenerator / CarteVersoGenerator

G√©n√©rateurs de cartes de membre:

```typescript
import CarteRectoGenerator from '../components/CarteRectoGenerator';

<CarteRectoGenerator
  userData={userData}
  onCardGenerated={(imageUri) => {
    console.log('Carte g√©n√©r√©e:', imageUri);
  }}
/>
```

### AdhesionFormGenerator

G√©n√©rateur de formulaire d'adh√©sion:

```typescript
import AdhesionFormGenerator from '../components/AdhesionFormGenerator';

<AdhesionFormGenerator
  formData={formData}
  onFormGenerated={(imageUri) => {
    console.log('Formulaire g√©n√©r√©:', imageUri);
  }}
/>
```

---

## üìú Scripts disponibles

### D√©veloppement

```bash
# D√©marrer le serveur de d√©veloppement
npm start
npx expo start

# D√©marrer sur Android
npm run android

# D√©marrer sur iOS (macOS uniquement)
npm run ios

# D√©marrer sur Web
npm run web

# Lancer en mode tunnel (pour tests sur autre r√©seau)
npx expo start --tunnel

# Lancer en mode LAN
npx expo start --lan

# Lancer en mode localhost
npx expo start --localhost
```

### Linting

```bash
# V√©rifier le code
npm run lint
npx expo lint

# Corriger automatiquement les erreurs
npx expo lint --fix
```

### Build & D√©ploiement

```bash
# Build Android (APK)
npx eas build --platform android --profile preview

# Build iOS (IPA)
npx eas build --platform ios --profile preview

# Build production (les deux)
npx eas build --platform all --profile production

# Publier une mise √† jour OTA
npx eas update --branch production --message "Mise √† jour importante"
```

### Utilitaires

```bash
# R√©initialiser le projet (nettoyer le cache)
npm run reset-project

# Nettoyer le cache Metro
npx expo start -c

# Nettoyer compl√®tement node_modules
rm -rf node_modules package-lock.json
npm install
```

## üöÄ D√©ploiement

### D√©ploiement avec EAS (Expo Application Services)

#### 1. Installation d'EAS CLI

```bash
npm install -g eas-cli
eas login
```

#### 2. Configuration du projet

```bash
eas build:configure
```

Cela cr√©era un fichier `eas.json`:

```json
{
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "preview": {
      "distribution": "internal",
      "android": {
        "buildType": "apk"
      }
    },
    "production": {
      "android": {
        "buildType": "app-bundle"
      },
      "ios": {
        "buildType": "archive"
      }
    }
  }
}
```

#### 3. Build Android

```bash
# Build pour test (APK)
eas build --platform android --profile preview

# Build production (AAB pour Google Play)
eas build --platform android --profile production
```

#### 4. Build iOS

```bash
# Build pour test
eas build --platform ios --profile preview

# Build production (pour App Store)
eas build --platform ios --profile production
```